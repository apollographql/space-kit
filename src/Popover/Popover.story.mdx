import userEvent from "@testing-library/user-event";
import { findByRole } from "@testing-library/dom";
import { Button } from "../Button";
import { Popover } from "../Popover";
import { PerformUserInteraction } from "../shared/PerformUserInteraction";
import { List } from "../List";
import { ListItem } from "../ListItem";
import {
  Description,
  Meta,
  Story,
  Props,
  Preview,
} from "@storybook/addon-docs/blocks";

<Meta title="Components|Popover" />

# Popover

<Description
  of={Popover}
  markdown="**Popover** is a thin wrapper to allow `List`s to be shown in a popover. Really, anything can be shown, but that's what the tests will illustrate."
/>

## Simple Popover

The simple list provides a list of options for a user to choose from and updates the button or select button with the choice the user has selected.

<Preview>
  <Story name="basic">
    <PerformUserInteraction
      callback={async () => {
        userEvent.click(await findByRole(document.body, "button"));
      }}
    >
      <Popover
        popperOptions={{ strategy: "fixed" }}
        placement="bottom-start"
        content={
          <List>
            <ListItem>Root</ListItem>
            <ListItem selected>Objects</ListItem>
            <ListItem>Inputs</ListItem>
            <ListItem>Interfaces</ListItem>
            <ListItem>Unions</ListItem>
            <ListItem>Scalars and Enums</ListItem>
          </List>
        }
        trigger={<Button>Open Popover</Button>}
      />
    </PerformUserInteraction>
  </Story>
  <Story name="interactive">
    <PerformUserInteraction
      callback={async () => {
        userEvent.click(await findByRole(document.body, "button"));
      }}
    >
      <Popover
        popperOptions={{ strategy: "fixed" }}
        placement="bottom-start"
        interactive
        content={
          <List>
            <ListItem>
              <label style={{ display: "flex", alignItems: "stretch" }}>
                <input id="option1" type="checkbox" />
                <span style={{ marginLeft: "1rem" }}>Option 1</span>
              </label>
            </ListItem>
            <ListItem>
              <label style={{ display: "flex", alignItems: "stretch" }}>
                <input id="option2" type="checkbox" />
                <span style={{ marginLeft: "1rem" }}>Option 2</span>
              </label>
            </ListItem>
            <ListItem>
              <label style={{ display: "flex", alignItems: "stretch" }}>
                <input id="option3" type="checkbox" />
                <span style={{ marginLeft: "1rem" }}>Option 3</span>
              </label>
            </ListItem>
            <ListItem>
              <label style={{ display: "flex", alignItems: "stretch" }}>
                <input id="option4" type="checkbox" />
                <span style={{ marginLeft: "1rem" }}>Option 4</span>
              </label>
            </ListItem>
          </List>
        }
        trigger={<Button>Open Popover</Button>}
      />
    </PerformUserInteraction>
  </Story>
</Preview>

## Props

### `Popover`

<Props of={Popover} />
